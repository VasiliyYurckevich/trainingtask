buildscript {
    repositories {
        mavenCentral()
    }
    ext {
        hsqldbVersion = "2.5.1"

    }
    dependencies {
        classpath "org.hsqldb:hsqldb:${hsqldbVersion}"
        classpath "com.bmuschko:gradle-cargo-plugin:2.1.1"
    }
}

plugins{
    id "java"
}

repositories {
    mavenCentral()
}

dependencies {
    compileOnly "javax.servlet:javax.servlet-api:4.0.1"
    implementation "org.hsqldb:hsqldb:2.5.1"
    compileOnly("javax:javaee-web-api:8.0.1")
    implementation group: "jstl", name: "jstl", version: "1.2"
}

test {
    useJUnitPlatform()
}

apply from: "database.gradle"


sourceSets {
    main {
        resources {
            srcDirs += ["src/main/java","src/main/webapp"]
            includes = ["**/*.html","**/*.css"]
        }
    }
}
apply plugin: "com.bmuschko.cargo"

cargo {
    containerId = "tomcat9x"
    port = 9090

    deployable {
        file = file("../com.qulix.yurkevichvv.trainingtask.servlets/build/libs/com.qulix.yurkevichvv.trainingtask.servlets-1.0-SNAPSHOT.war")
        context = "servlets"
    }

    deployable {
        file = file("../com.qulix.yurkevichvv.trainingtask.wicket/build/libs/com.qulix.yurkevichvv.trainingtask.wicket-1.0-SNAPSHOT.war")
        context = "wicket"
    }

}

allprojects {
    apply plugin: "java"
    apply plugin: "war"
    apply plugin: "checkstyle"

    group "com.qulix.yurkevichvv"
    version "1.0-SNAPSHOT"

    checkstyle {
        toolVersion = "8.14"
        configFile = rootProject.file("checkstyle/checkstyle.xml")
    }

    task Checkstyle(type: Checkstyle) {
        source "src/main/java"
        include "**/*.java"

        classpath = getProject().files()
    }

    java {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }

    tasks.withType(JavaCompile) {
        options.encoding = "UTF-8"
    }
}